#!/usr/bin/make -f
# -*- mode: makefile; coding: utf-8 -*-

include /usr/share/cdbs/1/rules/debhelper.mk
DEB_PYTHON_SYSTEM = pysupport
DEB_PYTHON_MODULE_PACKAGE = python-psychopy
DEB_PYTHON_MODULE_PACKAGES = python-psychopy
include /usr/share/cdbs/1/class/python-distutils.mk

## # Correct interpreter lines
## was pushed upstream, but snippet is left in for possible uses
## install/python-psychopy::
## 	find $(DEB_DESTDIR) -name \*.py \
##     | xargs sed -i -e '1 s,^#!.*python.*,#!/usr/bin/env python,g'

# Make tree dfsg-compliant
# Need to be run whenever master branch gets merged in
dfsg:
	@echo "I: Cleaning up the source tree to make it DFSG-compliant"
	-rm -f PsychoPyBuilder/*bak \
	  psychopy/demos/*.ttf psychopy/demos/*.mpg \
	  psychopy/ext/*bits*.* \
	  buildExeInstaller.nsi buildWinDistributions.bat \
	  googlecode_upload.py
	-rm -rf psychopy/serial windlls

# immediately useable documentation
#DEB_COMPRESS_EXCLUDE := .py .pdf .html .css .jpg .txt
DEB_INSTALL_CHANGELOGS_ALL := CHANGELOG.txt
DEB_INSTALL_DOCS_python-psychopy := {README,TODO}.txt debian/README.Debian-source

# do not actually install demos -- just symlink to them
#DEB_INSTALL_EXAMPLES_python-psychopy := psychopy/demos/*

